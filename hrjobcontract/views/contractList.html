<ul class="{{prefix}}list-contract">
    <li ng-repeat="contract in contractCurrent" ng-controller="ContractCtrl" ng-include src="'contract.html'"></li>
</ul>

<h3 ng-show="contractPast.length">Past Job Contracts:</h3>
<ul class="{{prefix}}list-contract">
    <li ng-repeat="contract in contractPast" ng-controller="ContractCtrl" ng-include src="'contract.html'"></li>
</ul>
<p>
    <button class="btn btn-default btn-sm btn-primary" ng-click="modalContract('new')">
        <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> Add New Job Contract
    </button>
</p>


<script type="text/ng-template" id="contract.html">
    <div class="panel panel-default {{prefix}}panel-action" ng-cloak>
        <div class="panel-body form-horizontal">
            <div class="row">
                <div class="col-xs-3">
                    <div class="form-group">
                        <label class="col-sm-5 control-label">Position:</label>
                        <div class="col-sm-7">
                            <p class="form-control-static">{{details.position}}</p>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-5 control-label">Contract type:</label>
                        <div class="col-sm-7">
                            <p class="form-control-static">{{details.contract_type}}</p>
                        </div>
                    </div>
                </div>
                <div class="col-xs-4">
                    <div class="form-group">
                        <label class="col-sm-5 control-label">Dates:</label>
                        <div class="col-sm-7">
                            <p class="form-control-static">{{details.period_start_date | formatPeriod}} - {{details.period_end_date | formatPeriod}}</p>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-5 control-label">Is primary?</label>
                        <div class="col-sm-7">
                            <input type="checkbox" name="primary" ng-model="details.is_primary" disabled>
                        </div>
                    </div>
                </div>
                <div class="col-xs-5 text-right">
                    <button class="btn btn-default btn-sm" ng-click="modalContract('view')">
                        <span class="glyphicon glyphicon-search" aria-hidden="true"></span> View current<br>revision
                    </button>
                    <button class="btn btn-default btn-sm"  ng-click="modalContract('edit')">
                        <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Correct error<br>on contract
                    </button>
                    <button class="btn btn-default btn-sm" ng-click="modalContract('change')">
                        <span class="glyphicon glyphicon-repeat" aria-hidden="true"></span> Change<br>contract terms
                    </button>
                    <a class="btn btn-sm"
                       tooltip-placement="left"
                       tooltip-html-unsafe="<p class='text-left'><strong>Change Contract Terms:</strong><br>
                                                   When an employeees job or role changes, i.e. promotion, secondment or move,
                                                   you can use this wizard to update the details of the contract and record a new
                                                   revision of the contract. A contract history is kept so you can always see the
                                                   previous version of the contract.</p>
                                                   <p class='text-left'><strong>Correct an error on the contract record:</strong><br>
                                                   If you notice an issue or error with the job terms you can correct these without
                                                   creating a new job history record. These changes are not stored as a new revision
                                                   of the contract.</p>">
                        <i class="fa fa-question-circle fa-lg"></i>
                    </a>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-12">
            <a class="btn btn-sm btn-collapse" ng-click="isCollapsed = !isCollapsed">
                <i ng-class="{fa: true, 'fa-caret-down': !isCollapsed, 'fa-caret-right': isCollapsed }"></i> {{isCollapsed ? 'More details' : 'Hide details'}}
            </a>
        </div>
    </div>
    <div collapse="isCollapsed">
        <div class="{{prefix}}contract-details">
            <div class="row">
                <div class="col-xs-12">
                    <tabset>
                        <tab heading="Summary">
                            <div ng-include src="'/sites/all/modules/civicrm/tools/extensions/civihr/hrjobcontract/views/contractSummary.html'"></div>
                        </tab>
                        <tab heading="Full History">
                            <div ng-include src="'/sites/all/modules/civicrm/tools/extensions/civihr/hrjobcontract/views/contractRevisionList.html?v=wefwef'"></div>
                        </tab>
                    </tabset>
                </div>
            </div>
        </div>
    </div>
</script>
