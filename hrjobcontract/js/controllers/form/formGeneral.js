console.log('Controller: FormGeneralCtrl');define(['controllers/controllers', 'moment'], function(controllers, moment){    controllers.controller('FormGeneralCtrl',['$scope',        function($scope){            var contractDetails = $scope.contract.details;            $scope.dpOpen = function($event, opened){                $event.preventDefault();                $event.stopPropagation();                $scope[opened] = true;            }            function duration(dateStart, dateEnd){                if (!dateStart || !dateEnd) {                    return 'Unspecified'                }                var days, months, m, years;                m = moment(dateEnd);                years = m.diff(dateStart, 'years');                m.add(-years, 'years');                months = m.diff(dateStart, 'months');                m.add(-months, 'months');                days = m.diff(dateStart, 'days');                years = years > 0  ? (years > 1 ? years + ' years ' : years + ' year ') :  '';                months = months > 0 ? (months > 1 ? months + ' months ' : months + ' months ') :  '';                days = days > 0 ? (days > 1 ? days + ' days' : days + ' days') : '';                return (years + months + days) || '0 days';            }            $scope.$watch('contract.details.period_start_date', function(){                moment(contractDetails.period_start_date);                $scope.dpDateEndMin = moment(contractDetails.period_start_date).add(1, 'day').format();                $scope.duration = duration(contractDetails.period_start_date, contractDetails.period_end_date);            });            $scope.$watch('contract.details.period_end_date', function(){                $scope.dpDateStartMax = contractDetails.period_end_date ? moment(contractDetails.period_end_date).subtract(1, 'day').format() : contractDetails.period_end_date = '';                $scope.duration = duration(contractDetails.period_start_date, contractDetails.period_end_date);            });        }]);});