console.log('Controller: FormHoursCtrl');define(['fraction','controllers/controllers','services/utils'], function(Fraction, controllers){    controllers.controller('FormHoursCtrl',['$scope','UtilsService',        function($scope, UtilsService){            var contractHours = $scope.contract.hours;            var promiseHoursLocation = UtilsService.getHoursLocation();            promiseHoursLocation.then(function(hoursLocation){                $scope.utils.hoursLocation = hoursLocation;                $scope.locationStandardHours = $scope.utils.hoursLocation[0];                contractHours.hours_type = contractHours.hours_type || 8;                function updateHours(locStandHrs, hrsType) {                    contractHours.hours_unit = locStandHrs.periodicity;                    switch(+hrsType) {                        case 8:                            contractHours.hours_amount = locStandHrs.standard_hours;                            break;                        case 4:                            contractHours.hours_amount = contractHours.hours_amount == locStandHrs.standard_hours ? Math.round(locStandHrs.standard_hours / 2) : contractHours.hours_amount;                            break;                        default:                            contractHours.hours_amount = 0;                    }                }                function updateFTE(hrsStandard, hrsAmount){                    hrsAmount = parseFloat(hrsAmount) || 0,                    hrsStandard = parseFloat(hrsStandard) || 0;                    var fteFraction = new Fraction(hrsAmount, hrsStandard);                    contractHours.fte_num = +contractHours.hours_type ? fteFraction.numerator : 0;                    contractHours.fte_denom = +contractHours.hours_type ? fteFraction.denominator : 0;                    contractHours.hours_fte = ((contractHours.fte_num/contractHours.fte_denom) || 0).toFixed(2);                    $scope.fteFraction = contractHours.fte_num + '/' + contractHours.fte_denom;                }                $scope.$watch('locationStandardHours', function(){                    updateHours($scope.locationStandardHours, contractHours.hours_type);                });                $scope.$watch('contract.hours.hours_type', function(){                    updateHours($scope.locationStandardHours, contractHours.hours_type);                });                $scope.$watch('contract.hours.hours_amount', function(){                    updateFTE($scope.locationStandardHours.standard_hours, contractHours.hours_amount)                });                $scope.$watch('contract.hours.hours_unit', function(){                    updateFTE($scope.locationStandardHours.standard_hours, contractHours.hours_amount)                });            },function(reason){                console.log('Failed: ' + reason);            });        }]);});